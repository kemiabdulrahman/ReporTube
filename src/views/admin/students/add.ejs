<%- include('../../partials/header', { title: 'Add Student' }) %>

<section class="section">
  <div class="container">
    <div class="column is-8 is-offset-2">
      <div class="box">
        <h3 class="title is-4 has-text-primary">
          <span class="icon"><i class="bi bi-person-plus"></i></span>
          <span>Add New Student</span>
        </h3>
        <hr>

        <% if (error) { %>
        <div class="notification is-danger is-light">
          <span class="icon"><i class="bi bi-exclamation-circle"></i></span>
          <%= error %>
        </div>
        <% } %>

        <form action="/admin/students/add" method="POST">
          <!-- Student Info -->
          <h5 class="title is-5 mt-4">Student Information</h5>

          <div class="columns is-multiline">
            <div class="column is-half">
              <div class="field">
                <label class="label">Admission Number *</label>
                <div class="control">
                  <input class="input" type="text" name="admission_number" required>
                </div>
              </div>
            </div>

            <div class="column is-half">
              <div class="field">
                <label class="label">Class *</label>
                <div class="control">
                  <div class="select is-fullwidth">
                    <select name="class_id" required>
                      <option value="">Select Class</option>
                      <% classes.forEach(cls => { %>
                        <option value="<%= cls.id %>"><%= cls.name %></option>
                      <% }) %>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-multiline">
            <div class="column is-one-third">
              <div class="field">
                <label class="label">First Name *</label>
                <div class="control">
                  <input class="input" type="text" name="first_name" required>
                </div>
              </div>
            </div>

            <div class="column is-one-third">
              <div class="field">
                <label class="label">Middle Name</label>
                <div class="control">
                  <input class="input" type="text" name="middle_name">
                </div>
              </div>
            </div>

            <div class="column is-one-third">
              <div class="field">
                <label class="label">Last Name *</label>
                <div class="control">
                  <input class="input" type="text" name="last_name" required>
                </div>
              </div>
            </div>
          </div>

          <div class="columns">
            <div class="column is-half">
              <div class="field">
                <label class="label">Date of Birth</label>
                <div class="control">
                  <input class="input" type="date" name="date_of_birth">
                </div>
              </div>
            </div>

            <div class="column is-half">
              <div class="field">
                <label class="label">Gender *</label>
                <div class="control">
                  <div class="select is-fullwidth">
                    <select name="gender" required>
                      <option value="">Select Gender</option>
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <hr>

          <!-- Parent Info -->
          <h5 class="title is-5 mt-4">Parent / Guardian Information</h5>

          <div class="field">
            <label class="label">Parent / Guardian Name</label>
            <div class="control">
              <input class="input" type="text" name="parent_name">
            </div>
          </div>

          <div class="columns">
            <div class="column is-half">
              <div class="field">
                <label class="label">Parent Email</label>
                <div class="control">
                  <input class="input" type="email" name="parent_email">
                </div>
                <p class="help">Reports will be sent to this email.</p>
              </div>
            </div>

            <div class="column is-half">
              <div class="field">
                <label class="label">Parent Phone</label>
                <div class="control">
                  <input class="input" type="tel" name="parent_phone">
                </div>
              </div>
            </div>
          </div>

          <div class="field is-grouped is-grouped-centered mt-5">
            <div class="control">
              <button type="submit" class="button is-primary is-medium">
                <span class="icon"><i class="bi bi-check-lg"></i></span>
                <span>Add Student</span>
              </button>
            </div>
            <div class="control">
              <a href="/admin/students" class="button is-light is-medium">
                <span class="icon"><i class="bi bi-x-lg"></i></span>
                <span>Cancel</span>
              </a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<%- include('../../partials/footer') %>
